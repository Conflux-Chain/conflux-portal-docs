<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Signing Data with Conflux Portal | Conflux Portal Developer</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Conflux Portal Developer"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="If you&#x27;d like to jump to some working signature examples, [you can visit this"><meta data-react-helmet="true" property="og:description" content="If you&#x27;d like to jump to some working signature examples, [you can visit this"><meta data-react-helmet="true" property="og:url" content="https://conflux-chain.github.io/conflux-portal-docs//conflux-portal-docs/docs/portal/API_Reference/Signing_Data/signing_data_with_portal">

<link data-react-helmet="true" rel="shortcut icon" href="/conflux-portal-docs/img/favicon.ico">


<link rel="stylesheet" href="/conflux-portal-docs/styles.86f508d4.css">


<link rel="preload" href="/conflux-portal-docs/styles.385e739d.js" as="script">

<link rel="preload" href="/conflux-portal-docs/runtime~main.84dcf17e.js" as="script">

<link rel="preload" href="/conflux-portal-docs/main.d14e8313.js" as="script">

<link rel="preload" href="/conflux-portal-docs/1.f20512fb.js" as="script">

<link rel="preload" href="/conflux-portal-docs/2.8e4b9218.js" as="script">

<link rel="preload" href="/conflux-portal-docs/3.9aef08f5.js" as="script">

<link rel="preload" href="/conflux-portal-docs/1be78505.a651fb04.js" as="script">

<link rel="preload" href="/conflux-portal-docs/26cb894d.06d9beaa.js" as="script">

<link rel="preload" href="/conflux-portal-docs/17896441.d56feb47.js" as="script">

<link rel="preload" href="/conflux-portal-docs/855437e1.0cc96b28.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/conflux-portal-docs/"><img class="navbar__logo" src="/conflux-portal-docs/img/logo.svg" alt="Conflux Logo"><strong class="navbar__title">Conflux Portal Documentation</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/conflux-portal-docs/docs/portal/introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/Conflux-Chain/conflux-portal">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/conflux-portal-docs/"><img class="navbar__logo" src="/conflux-portal-docs/img/logo.svg" alt="Conflux Logo"><strong class="navbar__title">Conflux Portal Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/conflux-portal-docs/docs/portal/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/Conflux-Chain/conflux-portal">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/conflux-portal-docs/img/logo.svg" alt="Conflux Logo"><strong>Conflux Portal Documentation</strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Conflux Portal</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/introduction">Introduction</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Main Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/Main_Concepts/getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/Main_Concepts/common_terms">Common Terms</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/Main_Concepts/initializing_dapps">Initializing Dapps</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/Main_Concepts/accessing_accounts">Accessing Accounts</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/Main_Concepts/sending_transactions">Sending Transactions</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/Examples/e2e_test_demo">A Demo Dapp We Are Using To Test Conflux Portal</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/provider_api">Conflux Provider API</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/json_rpc_api">The Conflux RPC API</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/experimental_api">Experimental APIs</a></li><li class="menu__list-item"><a class="menu__link" href="#!">Signning Data</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/signing_data_with_portal">Signing Data with Conflux Portal</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/cfx_sign">CFX Sign</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/sign_typed_data_v1">Sign Typed Data v1</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/sign_typed_data_v3">Sign Typed Data v3</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/sign_typed_data_v4">Sign Typed Data v4</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/conflux-portal-docs/docs/portal/best_practices">Best Practices</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Signing Data with Conflux Portal</h1></header><div class="markdown"><p>If you&#x27;d like to jump to some working signature examples, <a href="https://github.com/danfinlay/js-eth-personal-sign-examples">you can visit this
repository</a>. </p><p>If you&#x27;d like to read our JavaScript implementations of these methods, they are
all available in the npm package
<a href="https://github.com/MetaMask/eth-sig-util">eth-sig-util</a>. </p><p>Note that Conflux Portal supports signing transactions with Trezor and Ledger
hardware wallets. These hardware wallets currently only support signing data
using the <a href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/personal_sign"><code>personal_sign</code></a> method. If you have trouble
logging in to a website or dapp when using a Ledger or Trezor, the site may be
requesting you sign data via an unsupported method, in which case we recommend
using your standard Conflux Portal account.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="a-brief-history"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#a-brief-history" title="Direct link to heading">#</a>A Brief History</h2><p>There are currently five signing methods in Conflux Portal, and you might wonder
the history of these methods. Studying the history of these methods has some
lessons in it for the emergent lessons of decentralized standards emergence. Our
current five methods are: </p><ul><li><a href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/cfx_sign"><code>cfx_sign</code></a></li><li><a href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/personal_sign"><code>personal_sign</code></a></li><li><a href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/sign_typed_data_v1"><code>signTypedData</code></a> (currently identical to <code>signTypedData_v1</code>)</li><li><a href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/sign_typed_data_v1"><code>signTypedData_v1</code></a></li><li><a href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/sign_typed_data_v3"><code>signTypedData_v3</code></a></li></ul><p>There are likely to be many more over time. When MetMask first started, the
Provider API wasn&#x27;t designed to be exposed to untrusted websites, and so some
considerations weren&#x27;t taken as seriously as they were later. </p><p>In particular, the method <code>cfx_sign</code> is an open-ended signing method that allows
signing an arbitrary hash, which means it can be used to sign transactions, or
any other data, making it a dangerous phishing risk. </p><p>For this reason, we make this method show the most frightening possible message
to the user, and generally discourage using this method in production. However,
some applications (usually admin panels internal to teams) use this method for
the sake of its ease of use, and so we have continued to support it for the sake
of not breaking the workflows of active projects. </p><p>Eventually, the <a href="https://github.com/ethereum/go-ethereum/pull/2940"><code>personal_sign</code>
spec</a> was proposed, which added
a prefix to the data so it could not impersonate transactions. We also made this
method able to display human readable text when UTF-8 encoded, making it a
popular choice for site logins. </p><p>However, the text-prefix made those signatures expensive to verify on-chain, and
so with the help of the <a href="https://0xproject.com/">0xProtocol</a> team and
<a href="https://spankchain.com/">SpankChain</a>, the <a href="https://eips.ethereum.org/EIPS/eip-712">EIP
712</a> spec was written. </p><p>The strange part of EIP 712, and this decentralized standards ecosystem, is that
the proposal changed several times while retaining the same EIP. This means what
we initially implemented as <code>signTypedData</code> was the earliest proposed version,
while other groups implemented later versions under the same method name. </p><p>To avoid compatibility issues between clients, we recommend using the
hard-versioned method names <code>signTypedData_v1</code> and <code>signTypedData_v3</code>. The
missing <code>v2</code> represents an intermediary design that was implemented by the
Cipher browser, so that we have room to implement it if there is ever enough
developer demand for it. </p><p>In the future, it may help to have method names include a hash of their exact
proposal, since in a decentralized ecosystem, there is no absolute source of
truth of what a given name should map to. Instead, we are forced to invent new
patterns of collaboration, where we can drive forward and innovate, while
simultaneously avoiding creating a brittle ecosystem by changing our meanings
out from under the words. </p><p>I hope this has been a useful introduction to the history of our signing
methods! </p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Conflux-Chain/conflux-portal-docs/edit/master/docs/en/API_Reference/Signing_Data/Introduction.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-03-18T11:02:25.000Z" class="docLastUpdatedAt_1sqk">3/18/2020</time> by <strong>yqrashawn</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/conflux-portal-docs/docs/portal/API_Reference/experimental_api"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Experimental APIs</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/conflux-portal-docs/docs/portal/API_Reference/Signing_Data/cfx_sign"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">CFX Sign »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#a-brief-history" class="contents__link">A Brief History</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/conflux-portal-docs/docs/portal/introduction">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/conflux-portal-docs/docs/portal/Main_Concepts/getting_started">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://bounty.conflux-chain.org/">Conflux Bounty</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/Conflux-Chain/conflux-portal/issues">Issues</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/Conflux-Chain/conflux-portal">GitHub</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/Conflux_Network">Twitter</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Conflux Network, Inc. Built with Docusaurus.</div></div></div></footer>
</div>

<script src="/conflux-portal-docs/styles.385e739d.js"></script>

<script src="/conflux-portal-docs/runtime~main.84dcf17e.js"></script>

<script src="/conflux-portal-docs/main.d14e8313.js"></script>

<script src="/conflux-portal-docs/1.f20512fb.js"></script>

<script src="/conflux-portal-docs/2.8e4b9218.js"></script>

<script src="/conflux-portal-docs/3.9aef08f5.js"></script>

<script src="/conflux-portal-docs/1be78505.a651fb04.js"></script>

<script src="/conflux-portal-docs/26cb894d.06d9beaa.js"></script>

<script src="/conflux-portal-docs/17896441.d56feb47.js"></script>

<script src="/conflux-portal-docs/855437e1.0cc96b28.js"></script>


</body>
</html>