(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{151:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return p}));var a=t(1),o=t(9),i=(t(0),t(174)),r={id:"sending_transactions",title:"Sending Transactions",custom_edit_url:"https://github.com/Conflux-Chain/conflux-portal-docs/edit/master/docs/en/portal/Main_Concepts/Sending_Transactions.md"},s={id:"portal/Main_Concepts/sending_transactions",title:"Sending Transactions",description:"Transactions are a formal action on a blockchain. They are always initiated in",source:"@site/docs/en/portal/Main_Concepts/Sending_Transactions.md",permalink:"/docs/portal/Main_Concepts/sending_transactions",editUrl:"https://github.com/Conflux-Chain/conflux-portal-docs/edit/master/docs/en/portal/Main_Concepts/Sending_Transactions.md",lastUpdatedBy:"yqrashawn",lastUpdatedAt:1618459147,sidebar:"docs",previous:{title:"Accessing Accounts",permalink:"/docs/portal/Main_Concepts/accessing_accounts"},next:{title:"A Demo Dapp We Are Using To Test ConfluxPortal",permalink:"/docs/portal/Examples/e2e_test_demo"}},c=[{value:"Transaction Parameters",id:"transaction-parameters",children:[{value:"Nonce ignored",id:"nonce-ignored",children:[]},{value:"Gas Price optional",id:"gas-price-optional",children:[]},{value:"Gas Limit optional",id:"gas-limit-optional",children:[]},{value:"StorageLimit optional",id:"storagelimit-optional",children:[]},{value:"To semi-optional",id:"to-semi-optional",children:[]},{value:"Value optional",id:"value-optional",children:[]},{value:"Data semi-optional",id:"data-semi-optional",children:[]},{value:"Chain ID currently ignored",id:"chain-id-currently-ignored",children:[]}]}],l={rightToc:c};function p(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Transactions are a formal action on a blockchain. They are always initiated in\nConfluxPortal with a call to the ",Object(i.b)("inlineCode",{parentName:"p"},"cfx_sendTransaction")," method. They can involve\na simple sending of CFX, may result in sending tokens, creating a new smart\ncontract, or changing state on the blockchain in any number of ways. They are\nalways initiated by a signature from an ",Object(i.b)("em",{parentName:"p"},"external account"),", or a simple key\npair."),Object(i.b)("p",null,"In ConfluxPortal, using the ",Object(i.b)("inlineCode",{parentName:"p"},"conflux.sendAsync")," method directly, sending a\ntransaction will involve composing an options object like this:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'const transactionParameters = {\n  nonce: "0x00", // ignored by ConfluxPortal\n  gasPrice: "0x09184e72a000", // customizable by user during ConfluxPortal confirmation.\n  gas: "0x2710", // customizable by user during ConfluxPortal confirmation.\n  to: "cfx:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0sfbnjm2", // Required except during contract publications.\n  from: accounts[0], // must match user\'s active address.\n  value: "0x00", // Only required to send ether to the recipient from the initiating external account.\n  data:\n    "0x7f7465737432000000000000000000000000000000000000000000000000000000600057", // Optional, but used for defining smart contract creation and interaction.\n  chainId: 3, // Used to prevent transaction reuse across blockchains. Auto-filled by ConfluxPortal.\n  storageLimit: 1024, // used to limit the total storage usage of a transaction\n}\n\nconflux.sendAsync(\n  {\n    method: "cfx_sendTransaction",\n    params: [transactionParameters],\n    from: conflux.selectedAddress,\n  },\n  callback\n)\n')),Object(i.b)("h2",{id:"transaction-parameters"},"Transaction Parameters"),Object(i.b)("p",null,"Many transaction parameters are handled for you by ConfluxPortal, but it's good\nto know what all the parameters do."),Object(i.b)("h3",{id:"nonce-ignored"},"Nonce ","[ignored]"),Object(i.b)("p",null,"This field is ignored by ConfluxPortal."),Object(i.b)("p",null,"In Conflux every transaction has a nonce. This is so that each transaction can\nonly be processed by the blockchain once. Additionally, to be a valid\ntransaction, the nonce must either be ",Object(i.b)("inlineCode",{parentName:"p"},"0"),", or a transaction with the previous\nnumber must have already been processed."),Object(i.b)("p",null,"That means that transactions are always processed in order for a given account,\nand so incrementing nonces is a very sensitive matter that is easy to mess up,\nespecially when a user is interacting with multiple applications with pending\ntransactions using the same account, potentially across multiple devices."),Object(i.b)("p",null,"For these reasons, ConfluxPortal currently does not provide application\ndevelopers any way to customize the nonce of transactions it suggests, and\ninstead assists the user in managing their transaction queue themselves."),Object(i.b)("h3",{id:"gas-price-optional"},"Gas Price ","[optional]"),Object(i.b)("p",null,"Optional parameter - best used on private blockchains."),Object(i.b)("p",null,"In Conflux, the pool of pending transactions offer their gas price as a sort of\nauction bid to the validators to include this transaction in a block in exchange\nfor a transaction fee. That means high gas prices can mean faster processing,\nbut also more expensive transactions."),Object(i.b)("p",null,'ConfluxPortal helps users select a competitive gas price on the Conflux Main\nNetwork and popular test networks. We make requests to an API maintained by our\nfriends at MyCrypto and allow users to choose between "slow," "medium," and\n"fast" options for their gas price.'),Object(i.b)("p",null,"We cannot know about the gas market on all blockchains because it requires some\ndeep analysis. For this reason, while you can safely ignore this parameter on\nour main hosted networks, you may want to suggest a gas price in situations\nwhere your application knows more about the target network than we do."),Object(i.b)("h3",{id:"gas-limit-optional"},"Gas Limit ","[optional]"),Object(i.b)("p",null,"Optional parameter. Rarely useful to Dapp developers."),Object(i.b)("p",null,"Gas limit is a highly optional parameter, and we automatically calculate a\nreasonable amount for it. You will probably know that your smart contract\nbenefits from a custom gas limit if it ever does for some reason."),Object(i.b)("h3",{id:"storagelimit-optional"},"StorageLimit ","[optional]"),Object(i.b)("p",null,"Optional parameter. Rarely useful to Dapp developers."),Object(i.b)("p",null,"StorageLimit is a highly optional parameter, and we automatically calculate a\nreasonable amount for it. You will probably know that your smart contract\nbenefits from a custom storage limit if it ever does for some reason."),Object(i.b)("h3",{id:"to-semi-optional"},"To ","[semi-optional]"),Object(i.b)("p",null,"A hex-encoded Conflux address. Required for transactions with a recipient (all\ntransactions except for contract creation)."),Object(i.b)("p",null,"Contract creation occurs when there is no ",Object(i.b)("inlineCode",{parentName:"p"},"to")," value but there is a ",Object(i.b)("inlineCode",{parentName:"p"},"data"),"\nvalue."),Object(i.b)("h3",{id:"value-optional"},"Value ","[optional]"),Object(i.b)("p",null,"Hex-encoded value of the network's native currency to send. On the Main Conflux\nnetwork, this is cfx, which is denominated in ",Object(i.b)("em",{parentName:"p"},"drip"),", which is ",Object(i.b)("inlineCode",{parentName:"p"},"1e-18")," ether."),Object(i.b)("p",null,"Please note that these numbers often used in Conflux are far higher precision\nthan native JavaScript numbers, and can cause unpredictable behavior if not\nanticipated. For this reason, we highly recommend using\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt"}),"BigInt"),"\nor ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/indutny/bn.js/"}),"BN.js")," when manipulating values intended\nfor the blockchain."),Object(i.b)("h3",{id:"data-semi-optional"},"Data ","[semi-optional]"),Object(i.b)("p",null,"Required for smart contract creation."),Object(i.b)("p",null,"This field is also used for specifying contract methods and their parameters.\nYou can learn more about how that data is encoded on ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://solidity.readthedocs.io/en/develop/abi-spec.html"}),"the solidity ABI\nspec"),"."),Object(i.b)("h3",{id:"chain-id-currently-ignored"},"Chain ID ","[currently ignored]"),Object(i.b)("p",null,"Chain ID is currently derived by the user's current selected network at\n",Object(i.b)("inlineCode",{parentName:"p"},"conflux.networkVersion"),". In the future we will probably allow a way to connect\nto multiple networks at once, at which point this parameter will become\nimportant, so it may be useful to be in the habit of including now."))}p.isMDXComponent=!0},174:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m}));var a=t(0),o=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=o.a.createContext({}),p=function(e){var n=o.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s({},n,{},e)),t},u=function(e){var n=p(e.components);return o.a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},b=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(t),b=a,m=u["".concat(r,".").concat(b)]||u[b]||d[b]||i;return t?o.a.createElement(m,s({ref:n},l,{components:t})):o.a.createElement(m,s({ref:n},l))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=b;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<i;l++)r[l]=t[l];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);